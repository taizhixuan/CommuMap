{% extends 'base.html' %}

{% block title %}CommuMap - Your Community Dashboard{% endblock %}

{% block meta_description %}Access your personalized community dashboard. Discover local resources, connect with neighbors, and stay updated on community happenings in Selangor.{% endblock %}

{% block extra_css %}
<style>
    /* Modern dashboard design */
    .dashboard-hero {
        background: linear-gradient(135deg, 
            rgba(59, 130, 246, 0.08) 0%, 
            rgba(147, 51, 234, 0.08) 25%,
            rgba(236, 72, 153, 0.08) 50%,
            rgba(251, 146, 60, 0.08) 75%,
            rgba(34, 197, 94, 0.08) 100%
        );
        height: 100vh;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .dashboard-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%233b82f6' fill-opacity='0.02'%3E%3Cpolygon points='40 0 40 40 0 40'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        opacity: 0.6;
    }
    
    .hero-content {
        position: relative;
        z-index: 2;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .welcome-text {
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 25%, #ec4899 50%, #f59e0b 75%, #22c55e 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        background-size: 200% 200%;
        animation: gradientShift 8s ease-in-out infinite;
    }
    
    @keyframes gradientShift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    
    .search-box {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 24px;
        padding: 2rem;
        box-shadow: 0 8px 40px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
    }
    
    .search-box:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 50px rgba(0, 0, 0, 0.12);
        background: rgba(255, 255, 255, 0.98);
    }
    
    .search-input {
        border: 2px solid #e5e7eb;
        border-radius: 16px;
        padding: 1rem 1.5rem;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.9);
    }
    
    .search-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        background: white;
    }
    
    .search-btn {
        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
        border: none;
        border-radius: 16px;
        color: white;
        padding: 1rem 2rem;
        font-size: 1.1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
    }
    
    .search-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(59, 130, 246, 0.4);
    }
    
    .action-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s ease;
        text-decoration: none;
        color: inherit;
        display: block;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    }
    
    .action-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 50px rgba(0, 0, 0, 0.12);
        background: rgba(255, 255, 255, 0.95);
        text-decoration: none;
        color: inherit;
    }
    
    .action-icon {
        width: 80px;
        height: 80px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        margin: 0 auto 1.5rem;
        transition: all 0.3s ease;
    }
    
    .action-icon.primary { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
    .action-icon.secondary { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }
    .action-icon.accent { background: linear-gradient(135deg, #06b6d4, #0891b2); }
    .action-icon.success { background: linear-gradient(135deg, #10b981, #059669); }
    
    .community-stats {
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        position: relative;
    }
    
    .community-stats::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e2e8f0' fill-opacity='0.3'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        opacity: 0.4;
    }
    
    .stat-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    }
    
    .stat-number {
        font-size: 2.5rem;
        font-weight: 800;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.5rem;
    }
    
    .how-it-works {
        background: white;
        position: relative;
    }
    
    .step-card {
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid #f1f5f9;
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s ease;
        position: relative;
    }
    
    .step-card:hover {
        border-color: #3b82f6;
        transform: translateY(-5px);
        box-shadow: 0 10px 40px rgba(59, 130, 246, 0.1);
    }
    
    .step-number {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: bold;
        margin: 0 auto 1.5rem;
    }
    
    .animate-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease;
    }
    
    .animate-on-scroll.visible {
        opacity: 1;
        transform: translateY(0);
    }
    
    .floating-elements {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
        pointer-events: none;
    }
    
    .floating-element {
        position: absolute;
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
        border-radius: 50%;
        animation: float 25s infinite linear;
    }
    
    .floating-element:nth-child(1) {
        width: 100px;
        height: 100px;
        top: 15%;
        left: 5%;
        animation-delay: 0s;
    }
    
    .floating-element:nth-child(2) {
        width: 150px;
        height: 150px;
        top: 70%;
        right: 10%;
        animation-delay: -8s;
    }
    
    .floating-element:nth-child(3) {
        width: 80px;
        height: 80px;
        top: 50%;
        left: 80%;
        animation-delay: -15s;
    }
    
    @keyframes float {
        0% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
        50% { transform: translateY(-30px) rotate(180deg); opacity: 0.3; }
        100% { transform: translateY(0px) rotate(360deg); opacity: 0.1; }
    }
</style>
{% endblock %}

{% block content %}
<!-- Modern Dashboard Hero -->
<section class="dashboard-hero">
    <div class="floating-elements">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>
    
    <div class="hero-content">
        <div class="container mx-auto px-6 h-full">
            <div class="flex items-center justify-center min-h-screen">
                <div class="max-w-6xl mx-auto w-full">
                    <div class="text-center mb-12">
                        <h1 class="text-6xl md:text-7xl font-black mb-6">
                            <span class="welcome-text">Welcome Home</span>
                        </h1>
                        <p class="text-xl md:text-2xl font-light text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed">
                            Your personalized gateway to community resources.<br>
                            Discover, connect, and engage with your neighborhood.
                        </p>
                    </div>
                    
                    <!-- Enhanced Search Box -->
                    <div class="max-w-4xl mx-auto mb-12">
                        <div class="search-box">
                            <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                                üîç Find Community Resources
                            </h3>
                            <form action="{% url 'services:search' %}" method="GET" class="flex flex-col md:flex-row gap-4">
                                <input type="text" 
                                       name="q" 
                                       placeholder="Search for services, resources, or support..." 
                                       class="search-input flex-1" />
                                <button type="submit" class="search-btn">
                                    <span class="flex items-center justify-center gap-2">
                                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                        </svg>
                                        Search
                                    </span>
                                </button>
                            </form>
                            <p class="text-sm text-gray-500 mt-4 text-center">
                                Try searching for "healthcare", "food bank", "education", or "emergency services"
                            </p>
                        </div>
                    </div>
                    
                    <!-- Quick Action Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        {% if user.is_authenticated %}
                        <a href="{% url 'users:dashboard' %}" class="action-card animate-on-scroll">
                            <div class="action-icon primary">
                                üìä
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">My Dashboard</h3>
                            <p class="text-gray-600">Access your personal dashboard</p>
                        </a>
                        {% else %}
                        <a href="{% url 'core:register' %}" class="action-card animate-on-scroll">
                            <div class="action-icon primary">
                                üöÄ
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Join Community</h3>
                            <p class="text-gray-600">Start your community journey</p>
                        </a>
                        {% endif %}
                        
                        <a href="{% url 'core:about' %}" class="action-card animate-on-scroll">
                            <div class="action-icon secondary">
                                ‚ÑπÔ∏è
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Learn More</h3>
                            <p class="text-gray-600">Discover how CommuMap works</p>
                        </a>
                        
                        <a href="#community-impact" class="action-card animate-on-scroll">
                            <div class="action-icon accent">
                                üåü
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Community Impact</h3>
                            <p class="text-gray-600">See our collective achievements</p>
                        </a>
                        
                        <a href="#how-it-works" class="action-card animate-on-scroll">
                            <div class="action-icon success">
                                üéØ
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">How It Works</h3>
                            <p class="text-gray-600">Learn the simple steps</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Community Impact Statistics -->
<section id="community-impact" class="community-stats py-20">
    <div class="container mx-auto px-6 relative z-10">
        <div class="text-center mb-16 animate-on-scroll">
            <h2 class="text-5xl font-bold text-gray-800 mb-6">
                Community Impact
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                Together, we're building stronger communities across Selangor. 
                See how CommuMap is making a real difference in people's lives.
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 max-w-6xl mx-auto">
            <div class="stat-card animate-on-scroll">
                <div class="stat-number">{{ stats.total_services|default:"250" }}+</div>
                <div class="text-lg font-semibold text-gray-700 mb-2">Active Services</div>
                <div class="text-sm text-gray-500">Verified and updated regularly</div>
            </div>
            
            <div class="stat-card animate-on-scroll">
                <div class="stat-number">1000+</div>
                <div class="text-lg font-semibold text-gray-700 mb-2">Community Members</div>
                <div class="text-sm text-gray-500">Connected and growing daily</div>
            </div>
            
            <div class="stat-card animate-on-scroll">
                <div class="stat-number">5000+</div>
                <div class="text-lg font-semibold text-gray-700 mb-2">Monthly Searches</div>
                <div class="text-sm text-gray-500">Helping find resources</div>
            </div>
            
            <div class="stat-card animate-on-scroll">
                <div class="stat-number">{{ stats.emergency_services|default:"48" }}+</div>
                <div class="text-lg font-semibold text-gray-700 mb-2">Emergency Services</div>
                <div class="text-sm text-gray-500">24/7 availability</div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works -->
<section id="how-it-works" class="how-it-works py-20">
    <div class="container mx-auto px-6">
        <div class="text-center mb-16 animate-on-scroll">
            <h2 class="text-5xl font-bold text-gray-800 mb-6">
                How CommuMap Works
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                Getting connected to your community resources is simple and straightforward. 
                Here's how you can start making a difference today.
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
            <div class="step-card animate-on-scroll">
                <div class="step-number">1</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Discover Resources</h3>
                <p class="text-gray-600 leading-relaxed">
                    Use our powerful search to find healthcare, education, social services, 
                    and emergency resources in your area. Everything is verified and up-to-date.
                </p>
            </div>
            
            <div class="step-card animate-on-scroll">
                <div class="step-number">2</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Connect & Engage</h3>
                <p class="text-gray-600 leading-relaxed">
                    Get detailed information about services, read community reviews, 
                    and connect directly with service providers to access the help you need.
                </p>
            </div>
            
            <div class="step-card animate-on-scroll">
                <div class="step-number">3</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Build Community</h3>
                <p class="text-gray-600 leading-relaxed">
                    Share your experiences, leave reviews, and help others discover valuable resources. 
                    Together, we strengthen our community bonds.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-20 bg-gradient-to-br from-blue-50 to-purple-50">
    <div class="container mx-auto px-6 text-center">
        <div class="max-w-4xl mx-auto animate-on-scroll">
            <h2 class="text-5xl font-bold text-gray-800 mb-8">
                Ready to Get Started?
            </h2>
            <p class="text-xl text-gray-600 mb-12 leading-relaxed">
                Whether you're looking for resources or want to contribute to your community, 
                CommuMap is here to help you connect and make a difference.
            </p>
            
            {% if not user.is_authenticated %}
            <div class="flex flex-col sm:flex-row gap-6 justify-center">
                <a href="{% url 'core:register' %}" class="search-btn text-xl px-8 py-4 inline-flex items-center justify-center">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" class="mr-2">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
                    </svg>
                    Join Your Community
                </a>
                <a href="{% url 'core:login' %}" class="border-2 border-blue-500 text-blue-500 bg-white hover:bg-blue-50 rounded-2xl px-8 py-4 text-xl font-semibold transition-all duration-300 inline-flex items-center justify-center">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" class="mr-2">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h1"/>
                    </svg>
                    Sign In
                </a>
            </div>
            {% else %}
            <a href="{% url 'users:dashboard' %}" class="search-btn text-xl px-8 py-4 inline-flex items-center justify-center">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" class="mr-2">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                </svg>
                Go to Dashboard
            </a>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Intersection Observer for scroll animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, observerOptions);
    
    // Observe all elements with animate-on-scroll class
    document.querySelectorAll('.animate-on-scroll').forEach(el => {
        observer.observe(el);
    });
    
    // Add staggered animation delays
    document.querySelectorAll('.action-card').forEach((card, index) => {
        card.style.transitionDelay = `${index * 0.1}s`;
    });
    
    document.querySelectorAll('.stat-card').forEach((card, index) => {
        card.style.transitionDelay = `${index * 0.1}s`;
    });
    
    document.querySelectorAll('.step-card').forEach((card, index) => {
        card.style.transitionDelay = `${index * 0.15}s`;
    });
    
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // Auto-focus search input for better UX
    const searchInput = document.querySelector('.search-input');
    if (searchInput) {
        // Focus after a small delay to avoid conflicts with animations
        setTimeout(() => {
            searchInput.focus();
        }, 1000);
    }
});
</script>
{% endblock %} 