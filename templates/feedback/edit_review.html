{% extends 'base.html' %}

{% block title %}Edit Review for {{ object.service.name }} - CommuMap{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="max-w-2xl mx-auto">
        <h1 class="text-2xl font-bold mb-6">Edit Your Review for {{ object.service.name }}</h1>
        
        <div class="bg-white rounded-lg shadow-sm border p-6">
            <form method="post" class="space-y-6">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="id_rating" class="form-label">Rating *</label>
                    <select name="rating" id="id_rating" class="form-input" required>
                        <option value="">Select a rating</option>
                        <option value="5" {% if object.rating == 5 %}selected{% endif %}>5 - Excellent</option>
                        <option value="4" {% if object.rating == 4 %}selected{% endif %}>4 - Very Good</option>
                        <option value="3" {% if object.rating == 3 %}selected{% endif %}>3 - Good</option>
                        <option value="2" {% if object.rating == 2 %}selected{% endif %}>2 - Fair</option>
                        <option value="1" {% if object.rating == 1 %}selected{% endif %}>1 - Poor</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="id_title" class="form-label">Review Title *</label>
                    <input type="text" name="title" id="id_title" class="form-input" 
                           value="{{ object.title }}" placeholder="Brief summary of your experience" required>
                </div>
                
                <div class="form-group">
                    <label for="id_content" class="form-label">Your Review *</label>
                    <textarea name="content" id="id_content" class="form-input" rows="5"
                              placeholder="Share your experience with this service (minimum 20 characters)"
                              minlength="20" required>{{ object.content }}</textarea>
                </div>
                
                <div class="form-group">
                    <label for="id_visit_date" class="form-label">Visit Date (Optional)</label>
                    <input type="date" name="visit_date" id="id_visit_date" class="form-input" 
                           value="{% if object.visit_date %}{{ object.visit_date|date:'Y-m-d' }}{% endif %}">
                </div>
                
                <div class="form-group">
                    <label class="flex items-center gap-2">
                        <input type="checkbox" name="is_anonymous" class="checkbox" {% if object.is_anonymous %}checked{% endif %}>
                        Post anonymously
                    </label>
                </div>
                
                <div class="flex gap-4">
                    <button type="submit" class="btn btn-primary">Update Review</button>
                    <a href="{% url 'services:detail' pk=object.service.pk %}" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %} 